// TODO: Implement exceptions and refactor code to use them